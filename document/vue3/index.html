<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 新框架&amp;组件 | DataFan UI</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="所有的伟大，都源于一个勇敢的开始">
    
    <link rel="preload" href="/assets/css/0.styles.34a1d63c.css" as="style"><link rel="preload" href="/assets/js/app.f23f6559.js" as="script"><link rel="preload" href="/assets/js/2.8338e08f.js" as="script"><link rel="preload" href="/assets/js/7.21e85c6b.js" as="script"><link rel="prefetch" href="/assets/js/10.04887e69.js"><link rel="prefetch" href="/assets/js/11.ff216e39.js"><link rel="prefetch" href="/assets/js/12.9c08c873.js"><link rel="prefetch" href="/assets/js/13.3a7aee10.js"><link rel="prefetch" href="/assets/js/14.a86c86b0.js"><link rel="prefetch" href="/assets/js/15.9cd62db0.js"><link rel="prefetch" href="/assets/js/16.0b0cdc90.js"><link rel="prefetch" href="/assets/js/17.f06f092c.js"><link rel="prefetch" href="/assets/js/18.5fa98f24.js"><link rel="prefetch" href="/assets/js/19.5bdf62e4.js"><link rel="prefetch" href="/assets/js/20.f889b6e9.js"><link rel="prefetch" href="/assets/js/21.7db656fa.js"><link rel="prefetch" href="/assets/js/22.4bc4b2de.js"><link rel="prefetch" href="/assets/js/23.9abcb849.js"><link rel="prefetch" href="/assets/js/24.638f6676.js"><link rel="prefetch" href="/assets/js/25.11a912d0.js"><link rel="prefetch" href="/assets/js/26.dd82bbd6.js"><link rel="prefetch" href="/assets/js/27.cc53b385.js"><link rel="prefetch" href="/assets/js/28.35f0afd4.js"><link rel="prefetch" href="/assets/js/29.3a3ac171.js"><link rel="prefetch" href="/assets/js/3.58428ae3.js"><link rel="prefetch" href="/assets/js/30.6edd1443.js"><link rel="prefetch" href="/assets/js/31.e8cebcf7.js"><link rel="prefetch" href="/assets/js/32.925a6bff.js"><link rel="prefetch" href="/assets/js/33.43c01af6.js"><link rel="prefetch" href="/assets/js/34.d200da73.js"><link rel="prefetch" href="/assets/js/35.99ecea82.js"><link rel="prefetch" href="/assets/js/4.0f145285.js"><link rel="prefetch" href="/assets/js/5.a3b95010.js"><link rel="prefetch" href="/assets/js/6.5f342978.js"><link rel="prefetch" href="/assets/js/8.910b369e.js"><link rel="prefetch" href="/assets/js/9.787fe84a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34a1d63c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DataFan UI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/components/" class="nav-link">
  组件中心
</a></div><div class="nav-item"><a href="/design/" class="nav-link">
  规范文档
</a></div><div class="nav-item"><a href="/document/" class="nav-link router-link-active">
  开发手册
</a></div><div class="nav-item"><a href="https://github.com/young-datafan/datafan-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/components/" class="nav-link">
  组件中心
</a></div><div class="nav-item"><a href="/design/" class="nav-link">
  规范文档
</a></div><div class="nav-item"><a href="/document/" class="nav-link router-link-active">
  开发手册
</a></div><div class="nav-item"><a href="https://github.com/young-datafan/datafan-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/document/" aria-current="page" class="sidebar-link">开发手册</a></li><li><a href="/document/vue3/" aria-current="page" class="active sidebar-link">Vue3 新框架&amp;组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/vue3/#目录说明" class="sidebar-link">目录说明</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#开发工具配置" class="sidebar-link">开发工具配置</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#子平台配置" class="sidebar-link">子平台配置</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#系统管理模块配置" class="sidebar-link">系统管理模块配置</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#路由兼容配置-动态路由改造" class="sidebar-link">路由兼容配置&amp;动态路由改造</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#api-创建" class="sidebar-link">Api 创建</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#列表页面模板" class="sidebar-link">列表页面模板</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#表格组件" class="sidebar-link">表格组件</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#图标组件" class="sidebar-link">图标组件</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#页面标题-操作" class="sidebar-link">页面标题&amp;操作</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#页面查询筛选-页面操作功能" class="sidebar-link">页面查询筛选&amp;页面操作功能</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#permission-权限" class="sidebar-link">Permission 权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/vue3/#指令方式验证权限" class="sidebar-link">指令方式验证权限</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#函数方式验证权限" class="sidebar-link">函数方式验证权限</a></li></ul></li><li class="sidebar-sub-header"><a href="/document/vue3/#获取远程资源-图片地址、获取源地址" class="sidebar-link">获取远程资源&amp;图片地址、获取源地址</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#禁用按钮规则" class="sidebar-link">禁用按钮规则</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#复制功能" class="sidebar-link">复制功能</a></li><li class="sidebar-sub-header"><a href="/document/vue3/#环境变量" class="sidebar-link">环境变量</a></li></ul></li><li><a href="/document/pinia.html" class="sidebar-link">Pinia 新一代状态管理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3-新框架-组件"><a href="#vue3-新框架-组件" class="header-anchor">#</a> Vue3 新框架&amp;组件</h1> <h2 id="目录说明"><a href="#目录说明" class="header-anchor">#</a> 目录说明</h2> <div class="language- extra-class"><pre class="language-text"><code>├── build # 打包脚本相关
│   ├── config # 配置文件
│   ├── generate # 生成器
│   ├── script # 脚本
│   └── vite # vite配置
├── mock # mock文件夹
├── public # 公共静态资源目录
├── src # 主目录
│   ├── api # 接口文件
│   ├── assets # 资源文件
│   │   ├── icons # icon sprite 图标文件夹
│   │   ├── images # 项目存放图片的文件夹
│   │   └── svg # 项目存放svg图片的文件夹
│   ├── components # 公共组件
│   ├── design # 样式文件
│   ├── directives # 指令
│   ├── enums # 枚举/常量
│   ├── hooks # hook
│   │   ├── component # 组件相关hook
│   │   ├── core # 基础hook
│   │   ├── event # 事件相关hook
│   │   ├── setting # 配置相关hook
│   │   └── web # web相关hook
│   ├── layouts # 布局文件
│   │   ├── default # 默认布局
│   │   ├── iframe # iframe布局
│   │   └── page # 页面布局
│   ├── locales # 多语言
│   ├── logics # 逻辑
│   ├── main.ts # 主入口
│   ├── router # 路由配置
│   ├── settings # 项目配置
│   │   ├── componentSetting.ts # 组件配置
│   │   ├── designSetting.ts # 样式配置
│   │   ├── encryptionSetting.ts # 加密配置
│   │   ├── localeSetting.ts # 多语言配置
│   │   ├── projectSetting.ts # 项目配置
│   │   ├── siteSetting.ts # 站点配置
│   │   └── routerPermissionSettting.ts # 菜单权限与路由页面路径映射
│   ├── store # 数据仓库
│   ├── utils # 工具类
│   └── views # 页面
├── test # 测试
│   └── server # 测试用到的服务
│       ├── api # 测试服务器
│       ├── upload # 测试上传服务器
│       └── websocket # 测试ws服务器
├── types # 类型文件
├── vite.config.ts # vite配置文件
└── windi.config.ts # windcss配置文件
</code></pre></div><h2 id="开发工具配置"><a href="#开发工具配置" class="header-anchor">#</a> 开发工具配置</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>项目内已配置好规则与依赖插件，详见 <code>.vscode</code> 文件夹中设置</p> <p>推荐依赖安装：<code>VSCode</code> -&gt; <code>扩展</code> -&gt; 输入 <code>@recommended</code> -&gt; 安装工作区推荐插件</p></div> <p><img src="/assets/img/recommended.446c03c6.png" alt="avatar"></p> <h2 id="子平台配置"><a href="#子平台配置" class="header-anchor">#</a> 子平台配置</h2> <p>平台信息配置，区分子平台资源权限等</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// .env</span>
# 平台标识 nodeEnName
<span class="token constant">VITE_PLATFORM</span> <span class="token operator">=</span> escat
</code></pre></div><h2 id="系统管理模块配置"><a href="#系统管理模块配置" class="header-anchor">#</a> 系统管理模块配置</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>因为Vue3新项目与旧项目代码不兼容，<code>系统管理</code>模块为iframe引入展示，<code>资源管理</code>中配置菜单时，注意需要将资源中<code>跳转菜单</code>指定为<code>外链地址</code>模式并设置<code>路由地址</code>；如设置系统管理下的用户管理：<code>/stella/#/common/user</code>，即可正常使用</p></div> <p><img src="/assets/img/system.a317f48f.jpg" alt="avatar"></p> <h2 id="路由兼容配置-动态路由改造"><a href="#路由兼容配置-动态路由改造" class="header-anchor">#</a> 路由兼容配置&amp;动态路由改造</h2> <p>新版本中将不需要再手动定义路由，只需在<code>系统管理/资源管理</code>配置菜单资源即可；为兼容旧平台资源权限管理，需配置<code>菜单权限标识/nodeEnName</code>与路由页面路径数据映射，如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// src/setting/routerPermissionSettting.ts</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  home<span class="token operator">:</span> <span class="token string">'/home/index'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'project-list'</span><span class="token operator">:</span> <span class="token string">'/project/project-manage/index'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'group-list'</span><span class="token operator">:</span> <span class="token string">'/project/group/index'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'run-list'</span><span class="token operator">:</span> <span class="token string">'/project/run/index'</span><span class="token punctuation">,</span>
  workbench<span class="token operator">:</span> <span class="token string">'/project/workbench/index'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="api-创建"><a href="#api-创建" class="header-anchor">#</a> Api 创建</h2> <p>在 <code>src/api</code> 中创建模块文件夹如：<code>project</code>，添加对应的文件如：<code>group.ts</code>；添加数据模型文件夹 <code>model</code>，以及对应的模型文件 <code>group.ts</code> :</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// project/model/group.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BasicPageParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/api/model/baseModel'</span>

<span class="token comment">// 分页接口需继承基础分页参数：BasicPageParams</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GetGroupParams</span> <span class="token punctuation">{</span>
  groupName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">GroupInstance</span> <span class="token punctuation">{</span>
  groupName<span class="token operator">:</span> <span class="token builtin">string</span>
  groupOrder<span class="token operator">:</span> <span class="token builtin">any</span>
  describe<span class="token operator">:</span> <span class="token builtin">string</span>
  groupType<span class="token operator">:</span> <span class="token builtin">string</span>
  enabled<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span>
  createTime<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  createUserId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
  createUserName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  groupId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  groupTypeName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  updateTime<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  projectCount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token comment">// project/group.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defHttp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/utils/http/axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GetGroupParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./model/group'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BasicResult <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../model/baseModel'</span>

<span class="token keyword">enum</span> Api <span class="token punctuation">{</span>
  <span class="token comment">// API命名需明确后缀Api，方便与其他函数区分，如GetListApi、GetDetailByIdApi</span>
  GetGroup <span class="token operator">=</span> <span class="token string">'/escat-common-group-provider/group/selectLikeBy/TSJB'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description: 获取分组列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getGroupApi</span><span class="token punctuation">(</span>params<span class="token operator">:</span> GetGroupParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> defHttp<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>BasicResult<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> url<span class="token operator">:</span> Api<span class="token punctuation">.</span>GetGroup<span class="token punctuation">,</span> params<span class="token operator">:</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="列表页面模板"><a href="#列表页面模板" class="header-anchor">#</a> 列表页面模板</h2> <p><img src="/assets/img/pageTable.977ce456.jpg" alt="avatar"></p> <p><code>pageTable.vue</code> 完整代码</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BasicTable</span>
    <span class="token attr-name">@register</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>registerTable<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:rowSelection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ type: <span class="token punctuation">'</span>checkbox<span class="token punctuation">'</span>, selectedRowKeys, onChange: onSelectChange }<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 页面标题&amp;操作 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#pageTitle</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>新建分组
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 页面查询筛选 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#pageFilters</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>分组名称<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchInfo.groupName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopover</span> <span class="token attr-name">@reset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resetForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>创建人<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入创建人名称<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>单选<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择单选<span class="token punctuation">&quot;</span></span> <span class="token attr-name">allow-clear</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>多选<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select</span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multiple<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择多选<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show-arrow</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>测试1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>测试2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select-option</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>测试3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select-option</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-select</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>创建时间<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-date-picker</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>结束时间<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-date-picker</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>运行时间<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-range-picker</span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>YYYY-MM-DD<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>创建时间<span class="token punctuation">'</span>, <span class="token punctuation">'</span>结束时间<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopover</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fetch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 页面操作功能 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#pageActions</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ActionButton</span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectedRowKeys.length === 0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabledText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择要删除的数据<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>批量删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ActionButton</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 表格操作功能 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ record }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TableAction</span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getTableActions(record)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BasicTable</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
  <span class="token comment">// 图标组件</span>
  <span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">'/@/components/Icon'</span>
  <span class="token keyword">import</span> ActionButton <span class="token keyword">from</span> <span class="token string">'/@/components/ActionButton'</span>
  <span class="token comment">// 表格插件</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>
    BasicTable<span class="token punctuation">,</span>
    useTable<span class="token punctuation">,</span>
    TableAction<span class="token punctuation">,</span>
    ActionItem<span class="token punctuation">,</span>
    isActionColumnHidden<span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/components/Table'</span>

  <span class="token keyword">import</span> <span class="token punctuation">{</span> FilterPopover<span class="token punctuation">,</span> FilterPopoverItem <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/components/filter-popover'</span>
  <span class="token comment">// 表格中的类型</span>
  <span class="token keyword">import</span> type <span class="token punctuation">{</span> BasicColumn<span class="token punctuation">,</span> Key <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/components/Table/src/types/table'</span>
  <span class="token comment">// 表格列配置</span>
  <span class="token keyword">const</span> <span class="token literal-property property">columns</span><span class="token operator">:</span> BasicColumn<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'分组名称'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'groupName'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fixed</span><span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'分组描述'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'describe'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'项目数量'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'projectCount'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'分组排序'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'groupOrder'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'创建人'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'createUserName'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'createTime'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sorter</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'修改人'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'updateUserName'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'修改时间'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resizable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataIndex</span><span class="token operator">:</span> <span class="token string">'updateTime'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">minWidth</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>

  <span class="token comment">// API</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> getGroupApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/api/project/group'</span>
  <span class="token keyword">import</span> type <span class="token punctuation">{</span> GetGroupParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/api/project/model/group'</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 组件</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      BasicTable<span class="token punctuation">,</span>
      TableAction<span class="token punctuation">,</span>
      Icon<span class="token punctuation">,</span>
      ActionButton<span class="token punctuation">,</span>
      FilterPopover<span class="token punctuation">,</span>
      FilterPopoverItem<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 查询筛选参数</span>
      <span class="token keyword">const</span> searchInfo <span class="token operator">=</span> reactive<span class="token operator">&lt;</span>GetGroupParams<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">groupName</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 操作列配置及所有权限</span>
      <span class="token keyword">const</span> <span class="token function-variable function">getTableActions</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">record<span class="token operator">?</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 操作列方法</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'编辑'</span><span class="token punctuation">,</span> <span class="token comment">// 名称或提示</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'edit-square'</span><span class="token punctuation">,</span> <span class="token comment">// 图标</span>
            <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否loading状态</span>
            <span class="token literal-property property">disabled</span><span class="token operator">:</span> record<span class="token operator">?.</span>groupName <span class="token operator">===</span> <span class="token string">'w9'</span><span class="token punctuation">,</span> <span class="token comment">// 是否禁用</span>
            <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'编辑'</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span>
              <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">permission</span><span class="token operator">:</span> <span class="token string">'b_log_query'</span><span class="token punctuation">,</span> <span class="token comment">// 根据权限控制是否显示: 无权限，不显示</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'删除'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'delete'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">permission</span><span class="token operator">:</span> <span class="token string">'b_log_query'</span><span class="token punctuation">,</span> <span class="token comment">// 根据权限控制是否显示: 有权限，会显示</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'删除'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'delete'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">permission</span><span class="token operator">:</span> <span class="token string">'b_log_query'</span><span class="token punctuation">,</span> <span class="token comment">// 根据权限控制是否显示: 有权限，会显示</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'启用'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'yunhang'</span><span class="token punctuation">,</span>
            <span class="token comment">// 根据业务控制是否显示，如: 非enable状态的不显示启用按钮</span>
            <span class="token function-variable function">ifShow</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> record<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'enable'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'禁用'</span><span class="token punctuation">,</span>
            <span class="token comment">// 根据业务控制是否显示，如: enable状态的显示禁用按钮</span>
            <span class="token function-variable function">ifShow</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> record<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'enable'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'查看'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'filesearch'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">ifShow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">disabled</span><span class="token operator">:</span> record<span class="token operator">?.</span>groupName <span class="token operator">===</span> <span class="token string">'分组1'</span><span class="token punctuation">,</span> <span class="token comment">// 是否禁用</span>
            <span class="token literal-property property">disabledText</span><span class="token operator">:</span> <span class="token string">'你不能查看'</span><span class="token punctuation">,</span> <span class="token comment">// 禁用提示</span>
            <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查看'</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span> <span class="token keyword">as</span> ActionItem<span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 表格组件配置</span>
      <span class="token keyword">const</span> <span class="token punctuation">[</span>registerTable<span class="token punctuation">,</span> <span class="token punctuation">{</span> reload <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">pageTitle</span><span class="token operator">:</span> <span class="token string">'在列表页面的Title、Filter、Action、Table等使用样例'</span><span class="token punctuation">,</span> <span class="token comment">// 页面标题</span>
        <span class="token literal-property property">api</span><span class="token operator">:</span> Api<span class="token punctuation">,</span> <span class="token comment">// API命名后缀明确如：getGroupApi</span>
        searchInfo<span class="token punctuation">,</span> <span class="token comment">// 查询参数</span>
        <span class="token comment">// 默认排序字段</span>
        <span class="token literal-property property">defSort</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'createTime'</span><span class="token punctuation">,</span> <span class="token comment">// 排序字端</span>
          <span class="token literal-property property">order</span><span class="token operator">:</span> <span class="token string">'ascend'</span><span class="token punctuation">,</span> <span class="token comment">// 排序方式 ascend | descend</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">useSearchForm</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否使用查询过滤器</span>
        <span class="token literal-property property">showIndexColumn</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否展示序号</span>
        columns<span class="token punctuation">,</span> <span class="token comment">// 表格列配置</span>
        <span class="token comment">// 操作列配置</span>
        <span class="token literal-property property">actionColumn</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">defaultHidden</span><span class="token operator">:</span> <span class="token function">isActionColumnHidden</span><span class="token punctuation">(</span><span class="token function">getTableActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 操作列判断权限是否隐藏</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 查询</span>
      <span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> searchInfo <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 重制过滤筛选表单</span>
      <span class="token keyword">const</span> <span class="token function-variable function">resetForm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'重制过滤筛选表单'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 选中项keys</span>
      <span class="token keyword">const</span> selectedRowKeys <span class="token operator">=</span> ref<span class="token operator">&lt;</span>Key<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

      <span class="token comment">// 行选中事件</span>
      <span class="token keyword">function</span> <span class="token function">onSelectChange</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">keys</span><span class="token operator">:</span> Key<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        selectedRowKeys<span class="token punctuation">.</span>value <span class="token operator">=</span> keys
      <span class="token punctuation">}</span>

      <span class="token comment">// 返回的变量、函数</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        searchInfo<span class="token punctuation">,</span>
        selectedRowKeys<span class="token punctuation">,</span>
        registerTable<span class="token punctuation">,</span>
        getTableActions<span class="token punctuation">,</span>
        fetch<span class="token punctuation">,</span>
        resetForm<span class="token punctuation">,</span>
        onSelectChange<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="表格组件"><a href="#表格组件" class="header-anchor">#</a> 表格组件</h2> <p>参考<a href="https://vvbin.cn/next/#/comp/basic" target="_blank" rel="noopener noreferrer">vben admin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>及<a href="https://www.antdv.com/components/table-cn#API" target="_blank" rel="noopener noreferrer">ant design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的Table使用案例，如<a href="https://vvbin.cn/next/#/comp/table/editRowTable" target="_blank" rel="noopener noreferrer">可编辑行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://vvbin.cn/next/#/comp/table/treeTable" target="_blank" rel="noopener noreferrer">树形表格<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.antdv.com/components/table-cn#API" target="_blank" rel="noopener noreferrer">表格Api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等</p> <h2 id="图标组件"><a href="#图标组件" class="header-anchor">#</a> 图标组件</h2> <p><code>Iconfont</code> 图标库，通过 <code>Font Class</code> 方式引用，添加新图标登录<code>Iconfont</code> 在 <code>senses-icons</code> 项目中添加更新
<img src="/assets/img/iconfont.a8eb6abc.jpg" alt="avatar"></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 引入 &amp; 使用</span>
<span class="token keyword">import</span> Icon <span class="token keyword">from</span> <span class="token string">'/@/components/Icon/index'</span>

<span class="token operator">&lt;</span>Icon icon<span class="token operator">=</span><span class="token string">&quot;actions-dot-mark&quot;</span> <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;16&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Icon icon<span class="token operator">=</span><span class="token string">&quot;delete&quot;</span> <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">&quot;20&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="页面标题-操作"><a href="#页面标题-操作" class="header-anchor">#</a> 页面标题&amp;操作</h2> <p>左侧标题区、右侧操作区</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PageTitle</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>页面标题<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>新建分组
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PageTitle</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="页面查询筛选-页面操作功能"><a href="#页面查询筛选-页面操作功能" class="header-anchor">#</a> 页面查询筛选&amp;页面操作功能</h2> <p>左侧查询筛选区、右侧操作区</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PageHandle</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 页面查询筛选 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#filters</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>分组名称<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchInfo.groupName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-select</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopover</span> <span class="token attr-name">@reset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>resetForm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FilterPopoverItem</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>创建人<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入创建人名称<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopoverItem</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FilterPopover</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fetch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a-button</span><span class="token punctuation">&gt;</span></span>    
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 页面操作功能 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#actions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ActionButton</span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectedRowKeys.length === 0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabledText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请选择要删除的数据<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>批量删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ActionButton</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PageHandle</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="permission-权限"><a href="#permission-权限" class="header-anchor">#</a> Permission 权限</h2> <p>根据用户角色中配置的资源，区分权限展示</p> <h3 id="指令方式验证权限"><a href="#指令方式验证权限" class="header-anchor">#</a> 指令方式验证权限</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 单个权限验证，存在即为true</span>
v<span class="token operator">-</span>permission<span class="token operator">=</span><span class="token string">&quot;'nodeEnName'&quot;</span>

<span class="token comment">// 权限组验证，有一个即为true</span>
v<span class="token operator">-</span>permission<span class="token operator">=</span><span class="token string">&quot;['nodeEnName1', 'nodeEnName2']&quot;</span>
</code></pre></div><h3 id="函数方式验证权限"><a href="#函数方式验证权限" class="header-anchor">#</a> 函数方式验证权限</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 引入 &amp; 使用</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePermission <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/hooks/web/usePermission'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> hasPermission <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 单个权限验证，存在即为true</span>
<span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token string">'nodeEnName'</span><span class="token punctuation">)</span>

<span class="token comment">// 权限组验证，有一个即为true</span>
<span class="token function">hasPermission</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'nodeEnName1'</span><span class="token punctuation">,</span> <span class="token string">'nodeEnName2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="获取远程资源-图片地址、获取源地址"><a href="#获取远程资源-图片地址、获取源地址" class="header-anchor">#</a> 获取远程资源&amp;图片地址、获取源地址</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 使用</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAssetPath<span class="token punctuation">,</span> useOrigin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/hooks/web/useAsset'</span>

<span class="token comment">// 使用平台logo</span>
<span class="token operator">&lt;</span>img <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;useAssetPath('/common/img/stella-logo.png')&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// 获取当前服务环境（区分开发环境和生成环境）</span>
<span class="token function">useOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// useAsset.ts</span>
<span class="token comment">/**
 * @description: 获取远程静态资源地址
 * @param {string} src
 * @return {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useAssetPath</span><span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">useOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/static/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>src<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description: 区分环境获取当前服务源
 * @return {string}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useOrigin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEV</span> <span class="token operator">?</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_GLOB_DEV_URL</span> <span class="token operator">:</span> window<span class="token punctuation">.</span>origin
<span class="token punctuation">}</span>
</code></pre></div><h2 id="禁用按钮规则"><a href="#禁用按钮规则" class="header-anchor">#</a> 禁用按钮规则</h2> <p>当按钮被禁用时，需要以tooltip提示禁用的说明信息（ActionButton、TableAction都已配置disabledText属性，当按钮被禁用时则显示禁用提示）</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ActionButton 使用</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ActionButton <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/components/ActionButton'</span>

<span class="token operator">&lt;</span>ActionButton <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;selectedRowKeys.length === 0&quot;</span> disabledText<span class="token operator">=</span><span class="token string">&quot;请选择要删除的数据&quot;</span><span class="token operator">&gt;</span>批量删除<span class="token operator">&lt;</span><span class="token operator">/</span>ActionButton<span class="token operator">&gt;</span>

<span class="token comment">// TableAction 配置项</span>
<span class="token punctuation">{</span>
  label<span class="token operator">:</span> <span class="token string">'查看'</span><span class="token punctuation">,</span>
  icon<span class="token operator">:</span> <span class="token string">'filesearch'</span><span class="token punctuation">,</span>
  disabled<span class="token operator">:</span> record<span class="token operator">?.</span>groupName <span class="token operator">===</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span> <span class="token comment">// 是否禁用</span>
  disabledText<span class="token operator">:</span> <span class="token string">'你不能查看'</span><span class="token punctuation">,</span> <span class="token comment">// 禁用提示</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'查看'</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="复制功能"><a href="#复制功能" class="header-anchor">#</a> 复制功能</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 引入 &amp; 使用</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCopyToClipboard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/@/hooks/web/useCopyToClipboard'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> clipboardRef<span class="token punctuation">,</span> copiedRef <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCopyToClipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    clipboardRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'testCopyValue'</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>copiedRef<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      createMessage<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">'copy success！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 是否开发环境</span>
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEV</span>

<span class="token comment">// 是否生产环境</span>
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PROD</span>

<span class="token comment">// 当前环境变量</span>
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span>

<span class="token comment">// 开发服务器地址</span>
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_GLOB_DEV_URL</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/document/" class="prev router-link-active">
        开发手册
      </a></span> <span class="next"><a href="/document/pinia.html">
        Pinia 新一代状态管理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f23f6559.js" defer></script><script src="/assets/js/2.8338e08f.js" defer></script><script src="/assets/js/7.21e85c6b.js" defer></script>
  </body>
</html>
